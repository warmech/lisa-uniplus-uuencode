# UUENCODE / UUDECODE for UniPlus+ (System V) Unix on the Apple Lisa

This is a pretty barebones implementation of uuencode and uudecode for UniSoft's UniPlus+ System V Unix for the Apple Lisa. Both Xenix and UniPlus+ for the Lisa appear to lack these programs, despite other Unices of around the same vintage having them. The binaries produced by the two C source files are directly compatible with uuencode/uudecode instances on other machines; the uuencode binary in your Linux instance, for instance, will produce an output that the uudecode generated by uudecode.c will be able to decode back into a binary file. The inverse is also true, in that files converted to ASCII by the binary produced by uuencode.c can be decoded by the uudecode binary in your Linux instance.

NOTE: The C source files included here are written (as best as I can muster) in K&R C. Chances are, you're reading this because you own a Lisa and need to have uuencode/uudecode on hand to get binary data over the wire to said Lisa, so you probably at least know of K&R C even if you are unfamiliar with its conventions. If you aren't aware of K&R C, it is short for [Brian] Kernighan & [Dennis] Ritchie C (the guys who made, among other things, Unix and C) and is essentially the original dialect of C - "the King's English," if you will. It follows some different conventions than contemporary dialects of C and can take some getting used to, especially if C++ is the only C-like language you've had exposure to (such as a lack of function prototyping and constants, and variable increment operators going BEFORE the variable - e.g. ++x instead of x++). K&R C is still able to be compiled in modern OSes with gcc, so no toolchain shenanigans are required to make this compile on more modern Unix-likes. When writing C for either Xenix or UniPlus+, you will need to make sure to adhere to K&R C standards; if you do not, your code will likely not compile. I say likely, as there are just some fundamental operations in C that haven't changed much over the last several decades that will likely compile even if they aren't, technically, strictly formatted K&R C.

## Setup & Compilation

These will compile both using gcc and UniPlus+'s cc compiler; this code is untested in Xenix, however. Setup should work a bit like the following:

1. Power on the Lisa and boot into UniPlus+.

2. Connect your modern computer to serial port "B" on your Lisa; this will require a USB to RS-232 adapter if your computer does not have a serial port or directly support RS-232 communications.

3. On your modern computer, you will need to run some kind of terminal emulator (e.g. PuTTY, TeraTerm, HyperTerminal, etc.) and connect using the following settings on the serial port or USB to RS-232 adapter. In Windows, this will use a COM port (COM1, COM2, COM3, etc.) and in Linux/Unix/MacOS this will use a tty port (ttyS0, ttyUSB0, etc.):

```
BAUD RATE:   9600
DATA BITS:   7
PARITY:      NONE
STOP BITS:   1
FLOW CTRL:   NONE
```

4. If possible, before continuing, set a minor delay in character and line entry in your terminal emulator. Testing on my part has indicated that a delay of as little as 10ms per character (and line, if available) is enough to keep the flow of text from encountering transmission issues. TeraTerm and HyperTerminal directly support this feature.

5. In your terminal emulator, start the connection to the Lisa.

6. On the Lisa, once booted into UniPlus+, run the following command when logged in as root to enable multiuser mode:

```
# init 2
```

7. In your terminal emulator, you should now have a login prompt; enter your username and password and login. If you login as root, you will be placed at the volume root (/).

8. Create a directory to store the C source files in and cd into it:

```
# mkdir /uuencode
# cd /uuencode
```

9. Once in the source file directory, use ed to create a new text file:

```
# ed uuencode.c
```

10. The ed program will output a "?" followed by the filename "uuencode"; once this appears (see below), type the "a" key and hit enter. This will put ed into append mode and allow you to copy/paste the contents of the uuencode C source file into it.

```
?uuencode.c
a

```

11. Copy/paste the contents of the uuencode C source file into the terminal emulator and they will stream directly into ed's input buffer.

12. Once the text has finished streaming into the buffer:
    - Hit enter to go to a new line
	- Type a single period (".") to take ed out of append mode
	- Type a single w ("w") and hit enter to flush the ed buffer to the file on disk; ed will output the new size of the file
	- Type a single q ("q") and hit enter to return to the shell
	
(The following is an example of what this should look like in the terminal emulator)
```
	/* Close files */
    fclose(infile);
    fclose(outfile);

    return 0;
}
.
w
1738
q

#
```
	
13. Repeat steps 9-12 for uudecode.c

14. Enter the following command and hit enter to compile uuencode.c:

```
# cc uuencode.c -o uuencode
```

15. Repeat step 14 for uudecode.c

```
# cc uudecode.c -o uudecode
```

16. Move the two binary outputs to /bin:

```
# mv uuencode /bin
# mv uudecode /bin
```

17. You are now able to use uuencode and uudecode from anywhere on the system.

## Use & Testing

To use these two binaries, enter the following command(s), replacing infile and outfile with the names of the files you need to convert:

```
# uuencode infile.bin outfile.txt
# uudecode infile.txt outfile.bin
```

NOTE: If decoding a file that is supposed to be executable, you must use chmod+x to flag the file as executable:

```
# chmod+x outfile.bin
```

If you wish to test that your binaries produced a correctly decoded version of your binary file, simply diff your decoded binary against its source file:

```
# uuencode infile.bin outfile.txt
# uudecode infile.txt outfile.bin
# diff infile.bin outfile.bin
```

If the files are identical (i.e. diff returns nothing), then you have successfully verified that both files compiled as expected.

## License

None - this code is probably not all that good and it mimics a set of programs from around 40+ years ago that have already been out of date for decades (thanks base64!). No warranty is provided and I genuinely do not care what you do with this.